# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ Whale Bot v3.0

## 1. –í–≤–µ–¥–µ–Ω–∏–µ
Whale Bot v3.0 ‚Äî —ç—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è Telegram, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä—É–ø–Ω—ã—Ö –∏ ¬´—É–º–Ω—ã—Ö¬ª –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ —Ä—ã–Ω–∫–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ Polymarket. 

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:** –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é ¬´–ß–µ—Å—Ç–Ω–æ–π –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏¬ª (Honest Math), –∏–≥–Ω–æ—Ä–∏—Ä—É—è –±—É–º–∞–∂–Ω—É—é –ø—Ä–∏–±—ã–ª—å –∏ –Ω–∞–∫–∞–∑—ã–≤–∞—è –∑–∞ –º–∞–ª—ã–µ –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ (ROI, –í–∏–Ω—Ä–µ–π—Ç) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å —É—á–µ—Ç–æ–º —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π, –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏.

## 2. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|:---|:---|
| `/start` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ –ë–î –∏ –ø–æ–∫–∞–∑ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. |
| `/menu` | –í—ã–∑–æ–≤ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (–∫–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞). |
| `/settings` | –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Å—É–º–º–∞, –≤–∏–Ω—Ä–µ–π—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ç–∏–ø –∫–∏—Ç–∞). |
| `/stop` | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å—Ç–∞—Ç—É—Å `active = 0`). |
| `/stats` | –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –±–æ—Ç–∞ (—É—Å–ø–µ—à–Ω–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω–∏–π ROI). |
| `/report` | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç –∑–∞ 30 –¥–Ω–µ–π (—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∫–∏—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏). |
| `/status` | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã paper trading (pending/closed —Å–∏–≥–Ω–∞–ª—ã, —Ä–µ–∂–∏–º ROI). |
| `/guide` | –ì–∞–π–¥ –ø–æ –≤—ã–±–æ—Ä—É –ø—Ä–µ—Å–µ—Ç–æ–≤ —Ä–∏—Å–∫–∞ (–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π, –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π). |
| `/feedback` | –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏. |

## 3. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 3.1. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/start`) –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `chat_id`. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### 3.2. Callback Query (–ö–Ω–æ–ø–∫–∏)
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ Inline-–∫–Ω–æ–ø–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `callback_query`.
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –º–µ–Ω—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (`menu_main`, `menu_settings`).
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:** –¢–æ–≥–≥–ª—ã (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏) –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–∏–ø–æ–≤ –∫–∏—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è—é—Ç –ë–î –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.
- **–í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π:** –ö–Ω–æ–ø–∫–∏ –≤—Ä–æ–¥–µ ¬´üí∞ –ú–∏–Ω. —Å—Ç–∞–≤–∫–∞¬ª –ø–µ—Ä–µ–≤–æ–¥—è—Ç –±–æ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ (`userStates`).

### 3.3. –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö (State Machine)
–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—É—é –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∏–Ω. –≤–∏–Ω—Ä–µ–π—Ç¬ª).
2. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `waiting_winrate_min` –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ `chat_id`.
3. –°–ª–µ–¥—É—é—â–µ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞, –∞ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
4. –ü—Ä–æ–≤–æ–¥–∏—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (—á–∏—Å–ª–æ, –¥–∏–∞–ø–∞–∑–æ–Ω). –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ë–î –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.

## 4. –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π (–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –°–∏–≥–Ω–∞–ª–æ–≤)

### 4.1. Hard Filters (–ó–∞—â–∏—Ç–∞ –î–µ–ø–æ–∑–∏—Ç–∞)

**–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –î–û —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ –∏ —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:**

1. **SELL –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –í—Å–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (SELL) –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞ 10% –≤–∏–Ω—Ä–µ–π—Ç.
2. **Price Cap:** –°–¥–µ–ª–∫–∏ —Å —Ü–µ–Ω–æ–π > 0.75 –æ—Ç—Å–µ–∫–∞—é—Ç—Å—è. –§–∞–≤–æ—Ä–∏—Ç—ã —É–±—ã—Ç–æ—á–Ω—ã (-27% ROI –ø–æ paper trading).
3. **Min Value Safety:** –°–¥–µ–ª–∫–∏ < $50 –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –±–∞–∑—É —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ CSV –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏).

–≠—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—ã –∑–∞—â–∏—â–∞—é—Ç –¥–µ–ø–æ–∑–∏—Ç –æ—Ç —Ç–æ–∫—Å–∏—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –≤ paper trading.

### 4.2. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ (`runBotLoop`), –æ–ø—Ä–∞—à–∏–≤–∞—è API Polymarket –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã. –í–∫–ª—é—á–µ–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **Rate Limiting GraphQL:** –∑–∞–¥–µ—Ä–∂–∫–∞ 250ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ (‚âà4 req/sec).
- **Caching:** –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–∞ 60 –º–∏–Ω—É—Ç.
- **Thresholds:** –¥–ª—è —Å–¥–µ–ª–æ–∫ < $50 –∏—Å—Ç–æ—Ä–∏—è –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è (—ç–∫–æ–Ω–æ–º–∏—è –∫–≤–æ—Ç).
- **Lag Monitoring:** –ª–æ–≥–∏—Ä—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–¥–µ–ª–∫–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö).

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏:** –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏.
2. **–ü–µ—Ä–≤–∏—á–Ω—ã–π –æ—Ç—Å–µ–≤:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Ü–µ–Ω—ã —É–±—Ä–∞–Ω; —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–∏–Ω. —Å—Ç–∞–≤–∫–∞).
3. **–ê–Ω–∞–ª–∏–∑ –∫–æ—à–µ–ª—å–∫–∞ (Honest Math):**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è —á–µ—Ä–µ–∑ GraphQL.
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **–ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –í–∏–Ω—Ä–µ–π—Ç–∞ (Wilson Score)**.
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **–ú–µ–¥–∏–∞–Ω–Ω—ã–π PnL** (–¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤–ª–∏—è–Ω–∏—è —Ä–∞–∑–æ–≤—ã—Ö —É–¥–∞—á).
4. **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ö–∏—Ç–∞:**
   - *–ö–∏—Ç:* PnL > 0.
   - *–£–º–Ω—ã–π –ö–∏—Ç:* –û–±—â–∏–π PnL > $5000 **–ò** –ú–µ–¥–∏–∞–Ω–Ω—ã–π PnL > 0 **–ò** –í–∏–Ω—Ä–µ–π—Ç (CI) > 40%.
   - *–•–æ–º—è–∫:* PnL < -$1000.
5. **–ú–∞—Ç—á–∏–Ω–≥ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**
   - –ë–æ—Ç –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
   - –°–≤–µ—Ä—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–¥–µ–ª–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–∏–Ω. —Å—Ç–∞–≤–∫–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ç—Ä–µ–±—É–µ–º—ã–π –≤–∏–Ω—Ä–µ–π—Ç, —Ç–∏–ø –∫–∏—Ç–∞).
6. **–û—Ç–ø—Ä–∞–≤–∫–∞:** –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–π–¥–µ–Ω—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (Puppeteer) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ.

## 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **Polymarket Data API:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–µ–Ω—Ç—ã —Å–¥–µ–ª–æ–∫ (`/trades`, limit=200, poll=2s).
- **Goldsky GraphQL:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ PnL –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞.
- **Polymarket CLOB API:** –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤ (—Ç–æ–∫–µ–Ω–æ–≤, —É—Å–ª–æ–≤–∏–π) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥–æ–≤.
- **Telegram Bot API:** –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
